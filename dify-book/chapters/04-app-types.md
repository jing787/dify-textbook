# 第 4 章：理解应用类型——为什么要升级

> 客服助手跑了几天，小林收集了不少反馈：
>
> "投诉处理太冷冰冰了，客户更生气了。"
> "客户一封邮件问了三个问题，AI 只回答了第一个。"
> "有人问物流到哪了，AI 让他自己去查，能不能直接查出来？"
>
> 小林意识到：简单的 Chatbot 不够用了。

## Dify 的应用类型

在 Dify 中，你可以创建多种类型的应用。其中官方主推两种：

| 类型 | 说明 | 适用场景 |
|------|------|----------|
| **Workflow** | 工作流，多步骤流程编排，单次输入→输出 | 报告生成、数据处理、批量任务 |
| **Chatflow** | 对话式工作流，Workflow + 多轮对话记忆 | 客服、咨询、引导式问答 |

除此之外，还有三种简化类型（Chatbot、Agent、Text Generator），它们底层也是跑在 Workflow 引擎上的，只是提供了更简单的配置界面，适合快速验证想法。小林在第 3 章创建的就是 Chatbot——不需要画流程图，配置一下提示词和知识库就能跑起来。

但 Chatbot 的能力边界也很明显：
- 只能根据知识库回答
- 不能分步骤处理
- 不能调用外部系统
- 不能根据问题类型走不同流程

要解决反馈中的问题，需要升级到 **Workflow**。

## Chatbot vs Workflow：一个比喻

想象你去餐厅吃饭。

**Chatbot 像一个固定套餐**：
- 你说"我要吃饭"
- 服务员给你一份标准套餐
- 不管你具体想吃什么，都是这一份

**Workflow 像按菜谱做菜**：
- 先问你想吃什么（接收输入）
- 判断是中餐还是西餐（条件分支）
- 如果是中餐，调用中餐厨师；如果是西餐，调用西餐厨师（不同处理流程）
- 根据你的口味调整咸淡（参数调整）
- 最后装盘上菜（输出结果）

**Workflow 的核心能力是：你可以设计整个处理流程。**

## 什么时候用 Workflow

当你的需求符合以下情况时，应该考虑用 Workflow：

**1. 需要分类处理**
- 不同类型的问题，走不同的处理流程
- 例：产品咨询走产品库，售后问题走政策库，投诉走安抚流程

**2. 需要多步骤处理**
- 一个任务需要拆解成多个步骤
- 例：先提取问题关键词 → 搜索知识库 → 生成答案 → 格式化输出

**3. 需要调用外部系统**
- 需要查询数据库、调用 API、搜索网络
- 例：查询订单状态、获取实时物流信息

**4. 需要批量处理**
- 一个输入包含多个子任务
- 例：一封邮件里有三个问题，需要分别回答

小林的需求——分类处理、多问题回答、查询物流——全都指向 Workflow。

## 升级路径

好消息是，你不需要从头开始。

Dify 支持把已有的 Chatbot 逻辑"搬"到 Workflow 里，然后逐步增强。

接下来的几章，我们会一步步把 TechStore 客服升级：

| 章节 | 目标 | 学习内容 |
|------|------|----------|
| 第 5 章 | 用 Workflow 重建客服 | Workflow 基础、节点概念 |
| 第 6 章 | 分类处理不同问题 | 条件分支（IF/ELSE） |
| 第 7 章 | 处理一封邮件多个问题 | 迭代（Iteration） |
| 第 8 章 | 查询物流、搜索网络 | 工具调用（Agent） |

完成后，TechStore 客服会从"只能答基础问题的机器人"进化成"能分类、能拆解、能查询的智能助手"。

准备好了吗？下一章，我们开始动手。
