# 第 13 章：发布你的应用

> 到目前为止，小林已经用 Dify 创建了三个强大的应用：
>
> - TechStore 智能客服（Chatflow）
> - 运营周报生成器（Workflow）
> - 多平台内容工厂（Workflow）
>
> 它们都运行在 Dify 的编辑界面里。但小林想让更多人使用这些工具：
>
> *"客服可以用 AI 客服，运营可以用周报生成器，市场可以用内容工厂。我不可能让他们都登录我的 Dify 账号吧？"*
>
> 是时候把这些应用发布出去了。

## 方式一：生成网页链接

最简单的分享方式：一键生成访问链接。

**操作步骤：**

1. 打开你的应用（比如"TechStore 智能客服"）
2. 点击右上角的「发布」
3. 确认发布后，点击「运行」旁边的「访问」按钮
4. 你会得到一个链接：`https://udify.app/chat/xxxxxxxx`

把这个链接发给同事，他们打开就能用。

---

小林把 AI 客服的链接发到了客服部的群里。

*"试试这个链接，有问题在群里说。"*

5 分钟后，群里炸了：
- *"这也太方便了吧"*
- *"它居然知道我们的退货政策"*
- *"能不能 24 小时在线啊"*

---

**自定义设置：**

在「发布」设置里，你可以调整：
- 应用名称和图标
- 欢迎语
- 输入框提示
- 访问密码（可选）

小林给链接加了密码，只分享给内部测试的同事。

## 方式二：嵌入到网站

客服主管找到小林：*"能不能把这个 AI 客服放到我们官网上？让顾客直接就能问。"*

Dify 支持把应用嵌入到任意网页。

**操作步骤：**

1. 在应用设置中，找到「嵌入到网站」
2. 复制生成的嵌入代码：

```html
<script>
  window.difyChatbotConfig = {
    token: 'your-token-here'
  }
</script>
<script src="https://udify.app/embed.min.js" defer></script>
```

3. 把这段代码放到你网站的 HTML 里

**效果**：网站右下角会出现一个聊天气泡，顾客点击就能和 AI 对话。

---

小林找到 IT 部的同事，把代码加到了 TechStore 官网上。

上线第一天，AI 客服处理了 200 多次对话，其中 150 多次直接解决了问题，不需要转人工。

客服主管发来消息：*"小林，我请你喝奶茶！"*

## 方式三：API 集成

市场部的需求更复杂：*"我们想把内容工厂集成到内部系统里。在系统里填写产品信息 → 点击生成 → 自动调用你的工具 → 结果回填。"*

这需要用 API。

**什么是 API？**

简单说，API 就是"机器和机器对话的方式"。

- 你通过网页使用 Dify，是人和机器对话
- 你的系统通过 API 调用 Dify，是机器和机器对话

**获取 API：**

1. 在应用设置中，找到「API 访问」
2. 创建一个 API Key（这是身份凭证，别泄露）
3. 查看 API 文档

**API 调用示例：**

```bash
POST https://api.dify.ai/v1/workflows/run
Headers:
  Authorization: Bearer your-api-key
  Content-Type: application/json

Body:
{
  "inputs": {
    "product_info": "TechBuds Pro 3 真无线降噪耳机...",
    "platforms": ["公众号", "小红书", "微博"]
  },
  "user": "marketing_system"
}
```

**返回结果：**
```json
{
  "data": {
    "outputs": {
      "content": "【公众号版本】...【小红书版本】...【微博版本】..."
    }
  }
}
```

---

市场部的开发同学拿到 API 文档后，花了半天时间就完成了集成。

*"小林，你这个工具，一年给我们省下来的人力，可以招一个实习生了。"*

## 方式四：DSL 导出

财务部的老王找到小林：*"我看你那个周报生成器不错，能不能给我做一个财务版的？"*

小林想了想：*"我可以把框架给你，你自己改改就能用。"*

**什么是 DSL？**

DSL（Domain Specific Language）是 Dify 用来保存应用配置的格式。它把你的整个 Workflow——所有节点、连线、配置——保存成一个文件。

**导出 DSL：**
1. 在应用列表，点击应用的「...」菜单
2. 选择「导出 DSL」
3. 下载一个 `.yml` 文件

**导入 DSL：**
1. 点击「创建空白应用」
2. 选择「导入 DSL 文件」
3. 上传 `.yml` 文件

---

小林把周报生成器的 DSL 发给了老王，附上一句话：

*"节点结构不用动，把提示词里的'运营周报'改成'财务周报'，再调整一下输出格式就行。"*

老王折腾了两个小时，做出了"财务周报生成器"。

**DSL 的好处：**
- 分享应用框架，不用每次从零开始
- 版本管理——改坏了可以回退到之前的版本
- 团队协作——大家可以基于同一个版本迭代

::: tip 小林的习惯
每次大改 Workflow 之前，先导出一份 DSL 备份。
:::

## 安全与权限

应用发布之后，IT 部的安全专员找到小林：*"你这些 AI 工具，权限是怎么控制的？"*

小林把他了解到的信息整理了一下：

**API Key 安全：**
- 不要把 Key 写在前端代码里
- 通过后端服务器中转调用
- 定期更换 Key

**访问控制：**
- 内部工具设置访问密码
- 通过 API 的 user 参数追踪谁在用
- 敏感应用限制 IP 白名单

**成本控制：**
- 监控 API 调用量和 Token 消耗
- 设置每日/每月调用上限
- 对内部工具用便宜的模型

**数据隐私：**
- 注意知识库里有没有敏感信息
- 公开应用不要关联内部知识库
- 如果数据很敏感，考虑私有部署（下一章会讲）

安全专员听完，点点头：*"听起来你考虑得还挺全面的。"*

小林心想：*这些坑，有些是自己踩过的。*
